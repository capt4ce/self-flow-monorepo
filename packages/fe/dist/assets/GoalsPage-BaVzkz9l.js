import{n as e,r as m,R as ne}from"./vendor-react-tYkQlTQi.js";import{B as u,d as v,D as ie,a as me,b as te,c as ce,L as fe,I as de,u as ue,f as pe}from"./index-B2yiPlNq.js";import{C as Ne,a as xe,c as ge,b as be}from"./card-8r8oBd_e.js";import{B as I,s as je,A as M,k as O,l as F,m as L,n as _,o as R,p as B,q as H,r as $,d as he}from"./TaskDialog-DECGOoM7.js";import{T as ke,m as De,G as ve}from"./moveElement-BC8fn0W0.js";import{D as we,C as Ge,P as Ee}from"./vendor-ui-extras-CuoCuRK-.js";import{i as K,j as q,f as J,g as Ce,F as Ue,P as Q}from"./vendor-date-charts-B43nfnO2.js";import"./vendor-DNP07iVI.js";import"./vendor-router-DyZlD0AS.js";import"./vendor-forms-B4oTGqCB.js";const Ve=({goal:s,onEdit:t,onDelete:l,onAddTask:b,onEditTask:c,onToggleGoalStatus:f,onCreateTaskGroup:j,onEditTaskGroup:E,onDeleteTaskGroup:U,onMoveTaskToGroup:w,updateGoalTasks:r,showTasks:C=!0,showProgress:A=!0,compact:d=!1})=>{const h=s.tasks||[],k=s.taskCount||h.length,S=s.completedTaskCount||h.filter(p=>p.completed).length,V=async p=>{const{reason:N,source:{index:x},destination:g}=p;if(N!=="DROP"||!g||g.droppableId!==s.id||x===g.index)return;const i=De(h,x,g.index),y=i.map((G,T)=>({taskId:G.id,orderIndex:T}));r==null||r(s.id,i.map((G,T)=>({...G,orderIndex:T})));try{await v.tasks.reorder(y)}catch(G){console.error("Error reordering tasks:",G),r==null||r(s.id,h)}};return e.jsxDEV(Ne,{className:"bg-white hover:shadow-md transition-shadow",children:[e.jsxDEV(xe,{className:d?"pb-2":"pb-3",children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV(ge,{className:`${d?"text-base":"text-base sm:text-lg"} mb-2 cursor-pointer hover:text-blue-600 break-words`,onClick:()=>t==null?void 0:t(s.id),children:s.title},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:115,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-2 mb-2",children:[e.jsxDEV(I,{className:`text-xs sm:text-sm ${je(s.category)}`,children:s.category},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:124,columnNumber:15},void 0),s.status&&e.jsxDEV(I,{variant:s.status==="active"?"default":"secondary",className:"text-xs sm:text-sm",children:s.status},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:130,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:123,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:114,columnNumber:11},void 0),!d&&e.jsxDEV("div",{className:"flex gap-1 flex-shrink-0",children:[t&&e.jsxDEV(u,{variant:"ghost",size:"sm",className:"px-2 h-8 w-8",onClick:()=>t(s.id),title:"Edit goal",children:e.jsxDEV(K,{size:16},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:149,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:142,columnNumber:17},void 0),l&&e.jsxDEV(M,{children:[e.jsxDEV(O,{asChild:!0,children:e.jsxDEV(u,{variant:"ghost",size:"sm",className:"px-2 h-8 w-8 text-red-500 hover:text-red-700",title:"Delete goal",children:e.jsxDEV(q,{size:16},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:161,columnNumber:23},void 0)},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:155,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:154,columnNumber:19},void 0),e.jsxDEV(F,{children:[e.jsxDEV(L,{children:[e.jsxDEV(_,{children:"Delete Goal"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:166,columnNumber:23},void 0),e.jsxDEV(R,{children:['Are you sure you want to delete "',s.title,'"? This action cannot be undone and will remove all associated tasks.']},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:167,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:165,columnNumber:21},void 0),e.jsxDEV(B,{children:[e.jsxDEV(H,{children:"Cancel"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:174,columnNumber:23},void 0),e.jsxDEV($,{onClick:()=>l(s.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:175,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:173,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:164,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:153,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:140,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:113,columnNumber:9},void 0),s.description&&e.jsxDEV("div",{className:`text-sm text-muted-foreground whitespace-pre-wrap ${d?"line-clamp-1":"line-clamp-2"}`,dangerouslySetInnerHTML:{__html:(s.description||"").replace(/\n/g,"<br />")}},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:189,columnNumber:11},void 0),(s.startDate||s.endDate)&&e.jsxDEV("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxDEV(Ce,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:200,columnNumber:13},void 0),s.startDate&&J(new Date(s.startDate),"MMM dd"),s.startDate&&s.endDate&&" - ",s.endDate&&J(new Date(s.endDate),"MMM dd")]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:199,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:112,columnNumber:7},void 0),e.jsxDEV(be,{children:[A&&k>0&&e.jsxDEV("div",{className:"flex items-center justify-between gap-2 text-xs sm:text-sm text-muted-foreground mb-4",children:[e.jsxDEV("span",{className:"flex-shrink-0",children:["Tasks: ",S,"/",k]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:210,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex-1 min-w-0 max-w-[120px] sm:max-w-none sm:w-20 bg-gray-200 rounded-full h-2",children:e.jsxDEV("div",{className:"bg-green-500 h-2 rounded-full transition-all",style:{width:`${k>0?S/k*100:0}%`}},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:214,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:213,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:209,columnNumber:11},void 0),C&&e.jsxDEV("div",{className:"space-y-4 mb-4",children:(()=>{const p=h.filter(N=>!N.groupId);return p.length>0?e.jsxDEV("div",{className:"space-y-2",children:e.jsxDEV(we,{onDragEnd:V,children:e.jsxDEV(Ge,{droppableId:s.id,children:N=>e.jsxDEV("div",{...N.droppableProps,ref:N.innerRef,className:"space-y-2",children:[p.map((x,g)=>e.jsxDEV(Ee,{draggableId:x.id,index:g,children:(i,y)=>e.jsxDEV("div",{ref:i.innerRef,...i.draggableProps,...i.dragHandleProps,className:`mb-1 ${y.isDragging?"opacity-50":""}`,children:e.jsxDEV(ke,{task:x,onEditTask:c||(()=>{})},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:257,columnNumber:35},void 0)},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:249,columnNumber:33},void 0)},x.id,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:243,columnNumber:29},void 0)),N.placeholder]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:237,columnNumber:25},void 0)},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:235,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:234,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:233,columnNumber:17},void 0):null})()},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:227,columnNumber:11},void 0),C&&h.length===0&&e.jsxDEV("div",{className:"text-center py-4 text-muted-foreground text-sm mb-4",children:"No tasks yet."},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:277,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[f&&e.jsxDEV(u,{variant:"outline",size:"sm",onClick:()=>f(s.id,s.status||"active"),className:"flex-1 sm:flex-initial min-w-[120px]",children:[e.jsxDEV("span",{className:"hidden sm:inline",children:["Mark as ",s.status==="active"?"Done":"Active"]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:292,columnNumber:15},void 0),e.jsxDEV("span",{className:"sm:hidden",children:s.status==="active"?"Done":"Active"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:295,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:284,columnNumber:13},void 0),j&&e.jsxDEV(u,{variant:"outline",size:"sm",onClick:()=>j(s.id),title:"Create task group",className:"flex-shrink-0",children:[e.jsxDEV(Ue,{className:"h-4 w-4 sm:mr-2"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:308,columnNumber:15},void 0),e.jsxDEV("span",{className:"hidden sm:inline",children:"Group"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:309,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:301,columnNumber:13},void 0),b&&e.jsxDEV(u,{variant:"outline",size:"sm",onClick:()=>b(s.id),className:f||j?"flex-1 sm:flex-initial":"w-full",children:[e.jsxDEV(Q,{className:"h-4 w-4 sm:mr-2"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:323,columnNumber:15},void 0),e.jsxDEV("span",{className:"hidden sm:inline",children:"Add Task"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:324,columnNumber:15},void 0),e.jsxDEV("span",{className:"sm:hidden",children:"Task"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:325,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:313,columnNumber:13},void 0),d&&t&&e.jsxDEV(u,{variant:"ghost",size:"sm",className:"px-2 h-8 w-8",onClick:()=>t(s.id),title:"Edit goal",children:e.jsxDEV(K,{size:16},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:336,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:329,columnNumber:13},void 0),d&&l&&e.jsxDEV(M,{children:[e.jsxDEV(O,{asChild:!0,children:e.jsxDEV(u,{variant:"ghost",size:"sm",className:"px-2 h-8 w-8 text-red-500 hover:text-red-700",title:"Delete goal",children:e.jsxDEV(q,{size:16},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:348,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:342,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:341,columnNumber:15},void 0),e.jsxDEV(F,{children:[e.jsxDEV(L,{children:[e.jsxDEV(_,{children:"Delete Goal"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:353,columnNumber:19},void 0),e.jsxDEV(R,{children:['Are you sure you want to delete "',s.title,'"? This action cannot be undone and will remove all associated tasks.']},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:354,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:352,columnNumber:17},void 0),e.jsxDEV(B,{children:[e.jsxDEV(H,{children:"Cancel"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:361,columnNumber:19},void 0),e.jsxDEV($,{onClick:()=>l(s.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:362,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:360,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:351,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:340,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:282,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:207,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/common/GoalCard.tsx",lineNumber:111,columnNumber:5},void 0)},ye=({open:s,onOpenChange:t,group:l,onSave:b})=>{const[c,f]=m.useState((l==null?void 0:l.title)||""),[j,E]=m.useState(!1);ne.useEffect(()=>{f(l?l.title:"")},[l]);const U=async()=>{if(c.trim()!==""){E(!0);try{await b(c.trim()),f(""),t(!1)}catch(r){console.error("Error saving task group:",r)}finally{E(!1)}}},w=r=>{(r.metaKey||r.ctrlKey)&&r.key==="Enter"&&(r.preventDefault(),U())};return e.jsxDEV(ie,{open:s,onOpenChange:t,children:e.jsxDEV(me,{onKeyDown:w,className:"max-w-md",children:[e.jsxDEV(te,{children:e.jsxDEV(ce,{children:l?"Edit Task Group":"Create Task Group"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/dialogs/TaskGroupDialog.tsx",lineNumber:64,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/dialogs/TaskGroupDialog.tsx",lineNumber:63,columnNumber:9},void 0),e.jsxDEV("div",{className:"space-y-4 py-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(fe,{htmlFor:"group-title",children:"Group Title"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/dialogs/TaskGroupDialog.tsx",lineNumber:70,columnNumber:13},void 0),e.jsxDEV(de,{id:"group-title",value:c,onChange:r=>f(r.target.value),placeholder:"Enter group title"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/dialogs/TaskGroupDialog.tsx",lineNumber:71,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/dialogs/TaskGroupDialog.tsx",lineNumber:69,columnNumber:11},void 0),e.jsxDEV(u,{onClick:U,className:"w-full",disabled:j,children:j?"Saving...":l?"Update Group":"Create Group"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/dialogs/TaskGroupDialog.tsx",lineNumber:78,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/dialogs/TaskGroupDialog.tsx",lineNumber:68,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/dialogs/TaskGroupDialog.tsx",lineNumber:62,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/components/dialogs/TaskGroupDialog.tsx",lineNumber:61,columnNumber:5},void 0)};function _e(){const{user:s}=ue(),{refreshSubtasks:t}=pe(),[l,b]=m.useState([]),[c,f]=m.useState("active"),[j,E]=m.useState(!0),[U,w]=m.useState(!1),[r,C]=m.useState(null),[A,d]=m.useState(!1),[h,k]=m.useState({title:"",description:"",status:"todo",completed:!1}),[S,V]=m.useState(!1),[p,N]=m.useState(null),[x,g]=m.useState(""),i=async()=>{try{const o=await v.goals.list(c);b(o.data||[])}catch(o){console.error("Error fetching goals:",o)}finally{E(!1)}};m.useEffect(()=>{s?i():E(!1)},[s,c]);const y=async(o,a)=>{if(s)try{const n=a==="active"?"done":"active";await v.goals.update(o,{status:n}),await i()}catch(n){console.error("Error toggling goal status:",n)}},G=async o=>{if(s)try{await v.goals.delete(o),b(l.filter(a=>a.id!==o))}catch(a){console.error("Error deleting goal:",a)}},T=(o,a)=>{const n=[...l];n.forEach(D=>{D.id===o&&(D.tasks=a)}),b(n)},W=o=>{const a=l.find(n=>n.id===o);a&&(C(a),w(!0))},X=()=>{C(null),w(!0)},Y=o=>{var a;k({...o,status:o.status||"todo",goal_id:(a=l.find(n=>{var D;return(D=n.tasks)==null?void 0:D.some(P=>P.id===o.id)}))==null?void 0:a.id}),d(!0)},Z=async(o,a)=>{s&&(k({title:"",description:"",status:"todo",completed:!1,goal_id:o,parentId:a}),d(!0))},ee=async o=>{g(o),N(null),V(!0)},se=async o=>{var D;const a=l.find(P=>{var z;return(z=P.taskGroups)==null?void 0:z.some(re=>re.id===o)}),n=(D=a==null?void 0:a.taskGroups)==null?void 0:D.find(P=>P.id===o);n&&(g(a.id),N(n),V(!0))},oe=async o=>{if(s)try{await v.taskGroups.delete(o),await i()}catch(a){console.error("Error deleting task group:",a)}},ae=async o=>{if(!(!s||!x))try{p?await v.taskGroups.update(p.id,{title:o}):await v.taskGroups.create({title:o,goalId:x}),await i()}catch(a){throw console.error("Error saving task group:",a),a}},le=async(o,a)=>{if(s)try{await v.tasks.update(o,{groupId:a??void 0}),await i()}catch(n){console.error("Error moving task to group:",n)}};return s?e.jsxDEV("div",{className:"p-3 sm:p-4 lg:p-6",children:[e.jsxDEV("div",{className:"max-w-6xl mx-auto",children:[e.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4 sm:mb-6 lg:mb-8",children:[e.jsxDEV("div",{className:"min-w-0",children:[e.jsxDEV("h1",{className:"text-2xl sm:text-3xl font-bold",children:"All Goals"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:201,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm sm:text-base text-muted-foreground",children:"View and manage all your goals"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:202,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:200,columnNumber:11},this),e.jsxDEV(u,{onClick:X,className:"w-full sm:w-auto",size:"sm",children:[e.jsxDEV(Q,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:211,columnNumber:13},this),"Add Goal"]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:206,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:199,columnNumber:9},this),e.jsxDEV("div",{className:"flex gap-2 mb-4 sm:mb-6",children:[e.jsxDEV(u,{variant:c==="active"?"default":"outline",onClick:()=>f("active"),size:"sm",className:"flex-1 sm:flex-initial",children:"Active"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:217,columnNumber:11},this),e.jsxDEV(u,{variant:c==="done"?"default":"outline",onClick:()=>f("done"),size:"sm",className:"flex-1 sm:flex-initial",children:"Done"},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:225,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:216,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col gap-6",children:j?e.jsxDEV("div",{className:"text-center py-8 text-muted-foreground",children:e.jsxDEV("p",{children:"Loading goals..."},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:238,columnNumber:15},this)},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:237,columnNumber:13},this):l.length>0?l.map(o=>e.jsxDEV(Ve,{goal:o,onEdit:W,onDelete:G,onAddTask:Z,onEditTask:Y,onCreateTaskGroup:ee,onEditTaskGroup:se,onDeleteTaskGroup:oe,onMoveTaskToGroup:le,onToggleGoalStatus:y,showTasks:!0,showProgress:!0,compact:!1,updateGoalTasks:T},o.id,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:242,columnNumber:15},this)):e.jsxDEV("div",{className:"text-center py-8 text-muted-foreground",children:e.jsxDEV("p",{children:["No ",c," goals found."]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:262,columnNumber:15},this)},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:261,columnNumber:13},this)},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:235,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:198,columnNumber:7},this),e.jsxDEV(ve,{open:U,onOpenChange:w,goal:r,onSaved:()=>{i(),w(!1),C(null)}},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:269,columnNumber:7},this),e.jsxDEV(he,{open:A,onOpenChange:d,task:h,onSaved:async()=>{await i(),d(!1),k({title:"",description:"",status:"todo",completed:!1}),await t()}},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:281,columnNumber:7},this),e.jsxDEV(ye,{open:S,onOpenChange:V,group:p,onSave:ae},void 0,!1,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:299,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/ali/projects/self-flow-monorepo/packages/fe/src/pages/GoalsPage.tsx",lineNumber:197,columnNumber:5},this):null}export{_e as default};
